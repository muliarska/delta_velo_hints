{"ast":null,"code":"import _omit from 'lodash-es/omit';\n\nfunction _defaults(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass);\n}\n\nimport { latLngBounds, Map as LeafletMap } from 'leaflet';\nimport React from 'react';\nimport { LeafletProvider } from './context';\nimport MapComponent from './MapComponent';\nimport updateClassName from './utils/updateClassName';\nvar OTHER_PROPS = ['children', 'className', 'id', 'style', 'useFlyTo', 'whenReady'];\n\nvar normalizeCenter = function normalizeCenter(pos) {\n  return Array.isArray(pos) ? [pos[0], pos[1]] : [pos.lat, pos.lon ? pos.lon : pos.lng];\n};\n\nvar Map = function (_MapComponent) {\n  _inherits(Map, _MapComponent);\n\n  function Map() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Map);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _MapComponent.call.apply(_MapComponent, [this].concat(args))), _this), _this.viewport = {\n      center: undefined,\n      zoom: undefined\n    }, _this._updating = false, _this.onViewportChange = function () {\n      var center = _this.leafletElement.getCenter();\n\n      _this.viewport = {\n        center: center ? [center.lat, center.lng] : undefined,\n        zoom: _this.leafletElement.getZoom()\n      };\n\n      if (_this.props.onViewportChange && !_this._updating) {\n        _this.props.onViewportChange(_this.viewport);\n      }\n    }, _this.onViewportChanged = function () {\n      if (_this.props.onViewportChanged && !_this._updating) {\n        _this.props.onViewportChanged(_this.viewport);\n      }\n    }, _this.bindContainer = function (container) {\n      _this.container = container;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Map.prototype.createLeafletElement = function createLeafletElement(props) {\n    var viewport = props.viewport,\n        options = _objectWithoutProperties(props, ['viewport']);\n\n    if (viewport) {\n      if (viewport.center) {\n        options.center = viewport.center;\n      }\n\n      if (typeof viewport.zoom === 'number') {\n        options.zoom = viewport.zoom;\n      }\n    }\n\n    return new LeafletMap(this.container, options);\n  };\n\n  Map.prototype.updateLeafletElement = function updateLeafletElement(fromProps, toProps) {\n    this._updating = true;\n    var animate = toProps.animate,\n        bounds = toProps.bounds,\n        boundsOptions = toProps.boundsOptions,\n        boxZoom = toProps.boxZoom,\n        center = toProps.center,\n        className = toProps.className,\n        doubleClickZoom = toProps.doubleClickZoom,\n        dragging = toProps.dragging,\n        keyboard = toProps.keyboard,\n        maxBounds = toProps.maxBounds,\n        scrollWheelZoom = toProps.scrollWheelZoom,\n        tap = toProps.tap,\n        touchZoom = toProps.touchZoom,\n        useFlyTo = toProps.useFlyTo,\n        viewport = toProps.viewport,\n        zoom = toProps.zoom;\n    updateClassName(this.container, fromProps.className, className);\n\n    if (viewport && viewport !== fromProps.viewport) {\n      var c = viewport.center ? viewport.center : center;\n      var z = viewport.zoom == null ? zoom : viewport.zoom;\n\n      if (useFlyTo === true) {\n        this.leafletElement.flyTo(c, z, {\n          animate: animate\n        });\n      } else {\n        this.leafletElement.setView(c, z, {\n          animate: animate\n        });\n      }\n    } else if (center && this.shouldUpdateCenter(center, fromProps.center)) {\n      if (useFlyTo === true) {\n        this.leafletElement.flyTo(center, zoom, {\n          animate: animate\n        });\n      } else {\n        this.leafletElement.setView(center, zoom, {\n          animate: animate\n        });\n      }\n    } else if (typeof zoom === 'number' && zoom !== fromProps.zoom) {\n      if (fromProps.zoom == null) {\n        this.leafletElement.setView(center, zoom);\n      } else {\n        this.leafletElement.setZoom(zoom);\n      }\n    }\n\n    if (maxBounds && this.shouldUpdateBounds(maxBounds, fromProps.maxBounds)) {\n      this.leafletElement.setMaxBounds(maxBounds);\n    }\n\n    if (bounds && (this.shouldUpdateBounds(bounds, fromProps.bounds) || boundsOptions !== fromProps.boundsOptions)) {\n      if (useFlyTo === true) {\n        this.leafletElement.flyToBounds(bounds, boundsOptions);\n      } else {\n        this.leafletElement.fitBounds(bounds, boundsOptions);\n      }\n    }\n\n    if (boxZoom !== fromProps.boxZoom) {\n      if (boxZoom === true) {\n        this.leafletElement.boxZoom.enable();\n      } else {\n        this.leafletElement.boxZoom.disable();\n      }\n    }\n\n    if (doubleClickZoom !== fromProps.doubleClickZoom) {\n      if (doubleClickZoom === true) {\n        this.leafletElement.doubleClickZoom.enable();\n      } else {\n        this.leafletElement.doubleClickZoom.disable();\n      }\n    }\n\n    if (dragging !== fromProps.dragging) {\n      if (dragging === true) {\n        this.leafletElement.dragging.enable();\n      } else {\n        this.leafletElement.dragging.disable();\n      }\n    }\n\n    if (keyboard !== fromProps.keyboard) {\n      if (keyboard === true) {\n        this.leafletElement.keyboard.enable();\n      } else {\n        this.leafletElement.keyboard.disable();\n      }\n    }\n\n    if (scrollWheelZoom !== fromProps.scrollWheelZoom) {\n      if (scrollWheelZoom === true || typeof scrollWheelZoom === 'string') {\n        this.leafletElement.options.scrollWheelZoom = scrollWheelZoom;\n        this.leafletElement.scrollWheelZoom.enable();\n      } else {\n        this.leafletElement.scrollWheelZoom.disable();\n      }\n    }\n\n    if (tap !== fromProps.tap) {\n      if (tap === true) {\n        this.leafletElement.tap.enable();\n      } else {\n        this.leafletElement.tap.disable();\n      }\n    }\n\n    if (touchZoom !== fromProps.touchZoom) {\n      if (touchZoom === true || typeof touchZoom === 'string') {\n        this.leafletElement.options.touchZoom = touchZoom;\n        this.leafletElement.touchZoom.enable();\n      } else {\n        this.leafletElement.touchZoom.disable();\n      }\n    }\n\n    this._updating = false;\n  };\n\n  Map.prototype.componentDidMount = function componentDidMount() {\n    var props = _omit(this.props, OTHER_PROPS);\n\n    this.leafletElement = this.createLeafletElement(props);\n    this.leafletElement.on('move', this.onViewportChange);\n    this.leafletElement.on('moveend', this.onViewportChanged);\n\n    if (props.bounds != null) {\n      this.leafletElement.fitBounds(props.bounds, props.boundsOptions);\n    }\n\n    if (this.props.whenReady) {\n      this.leafletElement.whenReady(this.props.whenReady);\n    }\n\n    this.contextValue = {\n      layerContainer: this.leafletElement,\n      map: this.leafletElement\n    };\n\n    _MapComponent.prototype.componentDidMount.call(this);\n\n    this.forceUpdate(); // Re-render now that leafletElement is created\n  };\n\n  Map.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    this.updateLeafletElement(prevProps, this.props);\n  };\n\n  Map.prototype.componentWillUnmount = function componentWillUnmount() {\n    _MapComponent.prototype.componentWillUnmount.call(this);\n\n    this.leafletElement.off('move', this.onViewportChange);\n    this.leafletElement.off('moveend', this.onViewportChanged); // The canvas renderer uses requestAnimationFrame, making a deferred call to a deleted object\n    // When preferCanvas is set, use simpler teardown logic\n\n    if (this.props.preferCanvas === true) {\n      this.leafletElement._initEvents(true);\n\n      this.leafletElement._stop();\n    } else {\n      this.leafletElement.remove();\n    }\n  };\n\n  Map.prototype.shouldUpdateCenter = function shouldUpdateCenter(next, prev) {\n    if (!prev) return true;\n    next = normalizeCenter(next);\n    prev = normalizeCenter(prev);\n    return next[0] !== prev[0] || next[1] !== prev[1];\n  };\n\n  Map.prototype.shouldUpdateBounds = function shouldUpdateBounds(next, prev) {\n    return prev ? !latLngBounds(next).equals(latLngBounds(prev)) : true;\n  };\n\n  Map.prototype.render = function render() {\n    return React.createElement('div', {\n      className: this.props.className,\n      id: this.props.id,\n      ref: this.bindContainer,\n      style: this.props.style\n    }, this.contextValue ? React.createElement(LeafletProvider, {\n      value: this.contextValue\n    }, this.props.children) : null);\n  };\n\n  return Map;\n}(MapComponent);\n\nexport default Map;","map":{"version":3,"sources":["/home/slavko/Desktop/UCU_ files/Homework/Year_02/Part 02/WebDesign/React/main-velo-hints/node_modules/react-leaflet/es/Map.js"],"names":["_omit","_defaults","obj","defaults","keys","Object","getOwnPropertyNames","i","length","key","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_objectWithoutProperties","target","indexOf","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","enumerable","writable","setPrototypeOf","latLngBounds","Map","LeafletMap","React","LeafletProvider","MapComponent","updateClassName","OTHER_PROPS","normalizeCenter","pos","Array","isArray","lat","lon","lng","_MapComponent","_temp","_this","_ret","_len","arguments","args","_key","apply","concat","viewport","center","zoom","_updating","onViewportChange","leafletElement","getCenter","getZoom","props","onViewportChanged","bindContainer","container","createLeafletElement","options","updateLeafletElement","fromProps","toProps","animate","bounds","boundsOptions","boxZoom","className","doubleClickZoom","dragging","keyboard","maxBounds","scrollWheelZoom","tap","touchZoom","useFlyTo","c","z","flyTo","setView","shouldUpdateCenter","setZoom","shouldUpdateBounds","setMaxBounds","flyToBounds","fitBounds","enable","disable","componentDidMount","on","whenReady","contextValue","layerContainer","map","forceUpdate","componentDidUpdate","prevProps","componentWillUnmount","off","preferCanvas","_initEvents","_stop","remove","next","prev","equals","render","createElement","id","ref","style","children"],"mappings":"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","sourcesContent":["import _omit from 'lodash-es/omit';\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nimport { latLngBounds, Map as LeafletMap } from 'leaflet';\n\nimport React from 'react';\n\nimport { LeafletProvider } from './context';\nimport MapComponent from './MapComponent';\nimport updateClassName from './utils/updateClassName';\n\n\nvar OTHER_PROPS = ['children', 'className', 'id', 'style', 'useFlyTo', 'whenReady'];\n\nvar normalizeCenter = function normalizeCenter(pos) {\n  return Array.isArray(pos) ? [pos[0], pos[1]] : [pos.lat, pos.lon ? pos.lon : pos.lng];\n};\n\nvar Map = function (_MapComponent) {\n  _inherits(Map, _MapComponent);\n\n  function Map() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Map);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _MapComponent.call.apply(_MapComponent, [this].concat(args))), _this), _this.viewport = {\n      center: undefined,\n      zoom: undefined\n    }, _this._updating = false, _this.onViewportChange = function () {\n      var center = _this.leafletElement.getCenter();\n      _this.viewport = {\n        center: center ? [center.lat, center.lng] : undefined,\n        zoom: _this.leafletElement.getZoom()\n      };\n      if (_this.props.onViewportChange && !_this._updating) {\n        _this.props.onViewportChange(_this.viewport);\n      }\n    }, _this.onViewportChanged = function () {\n      if (_this.props.onViewportChanged && !_this._updating) {\n        _this.props.onViewportChanged(_this.viewport);\n      }\n    }, _this.bindContainer = function (container) {\n      _this.container = container;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Map.prototype.createLeafletElement = function createLeafletElement(props) {\n    var viewport = props.viewport,\n        options = _objectWithoutProperties(props, ['viewport']);\n\n    if (viewport) {\n      if (viewport.center) {\n        options.center = viewport.center;\n      }\n      if (typeof viewport.zoom === 'number') {\n        options.zoom = viewport.zoom;\n      }\n    }\n    return new LeafletMap(this.container, options);\n  };\n\n  Map.prototype.updateLeafletElement = function updateLeafletElement(fromProps, toProps) {\n    this._updating = true;\n\n    var animate = toProps.animate,\n        bounds = toProps.bounds,\n        boundsOptions = toProps.boundsOptions,\n        boxZoom = toProps.boxZoom,\n        center = toProps.center,\n        className = toProps.className,\n        doubleClickZoom = toProps.doubleClickZoom,\n        dragging = toProps.dragging,\n        keyboard = toProps.keyboard,\n        maxBounds = toProps.maxBounds,\n        scrollWheelZoom = toProps.scrollWheelZoom,\n        tap = toProps.tap,\n        touchZoom = toProps.touchZoom,\n        useFlyTo = toProps.useFlyTo,\n        viewport = toProps.viewport,\n        zoom = toProps.zoom;\n\n\n    updateClassName(this.container, fromProps.className, className);\n\n    if (viewport && viewport !== fromProps.viewport) {\n      var c = viewport.center ? viewport.center : center;\n      var z = viewport.zoom == null ? zoom : viewport.zoom;\n      if (useFlyTo === true) {\n        this.leafletElement.flyTo(c, z, { animate: animate });\n      } else {\n        this.leafletElement.setView(c, z, { animate: animate });\n      }\n    } else if (center && this.shouldUpdateCenter(center, fromProps.center)) {\n      if (useFlyTo === true) {\n        this.leafletElement.flyTo(center, zoom, { animate: animate });\n      } else {\n        this.leafletElement.setView(center, zoom, { animate: animate });\n      }\n    } else if (typeof zoom === 'number' && zoom !== fromProps.zoom) {\n      if (fromProps.zoom == null) {\n        this.leafletElement.setView(center, zoom);\n      } else {\n        this.leafletElement.setZoom(zoom);\n      }\n    }\n\n    if (maxBounds && this.shouldUpdateBounds(maxBounds, fromProps.maxBounds)) {\n      this.leafletElement.setMaxBounds(maxBounds);\n    }\n\n    if (bounds && (this.shouldUpdateBounds(bounds, fromProps.bounds) || boundsOptions !== fromProps.boundsOptions)) {\n      if (useFlyTo === true) {\n        this.leafletElement.flyToBounds(bounds, boundsOptions);\n      } else {\n        this.leafletElement.fitBounds(bounds, boundsOptions);\n      }\n    }\n\n    if (boxZoom !== fromProps.boxZoom) {\n      if (boxZoom === true) {\n        this.leafletElement.boxZoom.enable();\n      } else {\n        this.leafletElement.boxZoom.disable();\n      }\n    }\n\n    if (doubleClickZoom !== fromProps.doubleClickZoom) {\n      if (doubleClickZoom === true) {\n        this.leafletElement.doubleClickZoom.enable();\n      } else {\n        this.leafletElement.doubleClickZoom.disable();\n      }\n    }\n\n    if (dragging !== fromProps.dragging) {\n      if (dragging === true) {\n        this.leafletElement.dragging.enable();\n      } else {\n        this.leafletElement.dragging.disable();\n      }\n    }\n\n    if (keyboard !== fromProps.keyboard) {\n      if (keyboard === true) {\n        this.leafletElement.keyboard.enable();\n      } else {\n        this.leafletElement.keyboard.disable();\n      }\n    }\n\n    if (scrollWheelZoom !== fromProps.scrollWheelZoom) {\n      if (scrollWheelZoom === true || typeof scrollWheelZoom === 'string') {\n        this.leafletElement.options.scrollWheelZoom = scrollWheelZoom;\n        this.leafletElement.scrollWheelZoom.enable();\n      } else {\n        this.leafletElement.scrollWheelZoom.disable();\n      }\n    }\n\n    if (tap !== fromProps.tap) {\n      if (tap === true) {\n        this.leafletElement.tap.enable();\n      } else {\n        this.leafletElement.tap.disable();\n      }\n    }\n\n    if (touchZoom !== fromProps.touchZoom) {\n      if (touchZoom === true || typeof touchZoom === 'string') {\n        this.leafletElement.options.touchZoom = touchZoom;\n        this.leafletElement.touchZoom.enable();\n      } else {\n        this.leafletElement.touchZoom.disable();\n      }\n    }\n\n    this._updating = false;\n  };\n\n  Map.prototype.componentDidMount = function componentDidMount() {\n    var props = _omit(this.props, OTHER_PROPS);\n    this.leafletElement = this.createLeafletElement(props);\n\n    this.leafletElement.on('move', this.onViewportChange);\n    this.leafletElement.on('moveend', this.onViewportChanged);\n\n    if (props.bounds != null) {\n      this.leafletElement.fitBounds(props.bounds, props.boundsOptions);\n    }\n\n    if (this.props.whenReady) {\n      this.leafletElement.whenReady(this.props.whenReady);\n    }\n\n    this.contextValue = {\n      layerContainer: this.leafletElement,\n      map: this.leafletElement\n    };\n\n    _MapComponent.prototype.componentDidMount.call(this);\n    this.forceUpdate(); // Re-render now that leafletElement is created\n  };\n\n  Map.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    this.updateLeafletElement(prevProps, this.props);\n  };\n\n  Map.prototype.componentWillUnmount = function componentWillUnmount() {\n    _MapComponent.prototype.componentWillUnmount.call(this);\n\n    this.leafletElement.off('move', this.onViewportChange);\n    this.leafletElement.off('moveend', this.onViewportChanged);\n\n    // The canvas renderer uses requestAnimationFrame, making a deferred call to a deleted object\n    // When preferCanvas is set, use simpler teardown logic\n    if (this.props.preferCanvas === true) {\n      this.leafletElement._initEvents(true);\n      this.leafletElement._stop();\n    } else {\n      this.leafletElement.remove();\n    }\n  };\n\n  Map.prototype.shouldUpdateCenter = function shouldUpdateCenter(next, prev) {\n    if (!prev) return true;\n    next = normalizeCenter(next);\n    prev = normalizeCenter(prev);\n    return next[0] !== prev[0] || next[1] !== prev[1];\n  };\n\n  Map.prototype.shouldUpdateBounds = function shouldUpdateBounds(next, prev) {\n    return prev ? !latLngBounds(next).equals(latLngBounds(prev)) : true;\n  };\n\n  Map.prototype.render = function render() {\n    return React.createElement(\n      'div',\n      {\n        className: this.props.className,\n        id: this.props.id,\n        ref: this.bindContainer,\n        style: this.props.style },\n      this.contextValue ? React.createElement(\n        LeafletProvider,\n        { value: this.contextValue },\n        this.props.children\n      ) : null\n    );\n  };\n\n  return Map;\n}(MapComponent);\n\nexport default Map;"]},"metadata":{},"sourceType":"module"}